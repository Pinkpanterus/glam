<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>glam</title>
</head>
<body>
	<div id="container" style="width:98%; height:98%; position:absolute;"></div>

	<script src="../../build/glam.js"></script>
	<script>

	var cube = null,
		plane = null;
	var dirlight = null;
	var camera1 = null, camera2 = null;
	
	window.addEventListener('load', function(){
		var container = document.getElementById("container");
		
		var app = new glam.Viewer({ container : container, displayStats:true } );
		
		var root = new glam.Object;

		var group = new glam.Object;
		root.addChild(group);
		
		plane = createPlane();
		group.addChild(plane);

		cube = createCube();
		group.addChild(cube);

		var obj = new glam.Object;
		obj.addComponent(new glam.AmbientLight);
		obj.light.color.setHex(0x444444);
		root.addChild(obj);

		var controller = app.controllerScript;
		var camera = controller.camera;
//		camera.position.set(0, 0, 0);

		app.addObject(root);

		app.run();
	},
	false
	);

	function createPlane() {	
		var o = new glam.Object;

		var c = new glam.Object;
		c.transform.position.set(-2, 0, -10);

		var visual = new glam.Visual(
				{ geometry: new THREE.PlaneGeometry(2, 2),
					material: new THREE.MeshPhongMaterial({color:0xffffff, map:THREE.ImageUtils.loadTexture("./images/board.png")})
				});

		
		o.addComponent(visual);

//		o.addChild(c);

		var billboard = new glam.Billboard({screenAlign:true});
		o.addComponent(billboard);

		return o;
	}

	function createCube() {	
		var o = new glam.Object;

		o.transform.rotation.x = Math.PI / 6;
		o.transform.position.set(2, 0, -10);
		
		var visual = new glam.Visual(
				{ geometry: new THREE.BoxGeometry(2, 2, 2),
					material: new THREE.MeshPhongMaterial({color:0xffffff, map:THREE.ImageUtils.loadTexture("./images/board.png")})
				});

		
		o.addComponent(visual);

		var viewpicker = new glam.ViewPicker;
		viewpicker.addEventListener("viewover", function() {
			console.log('over');
		});
		viewpicker.addEventListener("viewout", function() {
			console.log('out');
		});

		o.addComponent(viewpicker);
		return o;
	}
	
	</script>
	
</body>
</html>